{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://extension-chatbot-fin/./src/modules/api.js","webpack://extension-chatbot-fin/./src/modules/config.js","webpack://extension-chatbot-fin/./src/modules/handlers.js","webpack://extension-chatbot-fin/./src/modules/helpers.js","webpack://extension-chatbot-fin/./src/modules/components/settings_window.js","webpack://extension-chatbot-fin/./src/main.js","webpack://extension-chatbot-fin/./src/modules/ui.js","webpack://extension-chatbot-fin/./src/modules/components/popup.js","webpack://extension-chatbot-fin/./src/modules/components/header.js","webpack://extension-chatbot-fin/./src/modules/components/chat.js"],"sourcesContent":["// api.js\r\n\r\n// Function to POST JSON to the server endpoint\r\nfunction postWebTextToServer(textContent, currentUrl) {\r\n    return fetch(\"http://127.0.0.1:8000/input_webtext/\", {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n            textContent: textContent,\r\n            currentUrl: currentUrl\r\n        }),\r\n    })\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                throw new Error(`Network response was not ok (status: ${response.status})`);\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            console.log(\"Response from server:\", data);\r\n            return data;\r\n        })\r\n        .catch(error => {\r\n            console.error(\"There was a problem with your fetch operation:\", error);\r\n            throw error;\r\n        });\r\n}\r\n\r\n// Function to get chat response from server\r\nfunction getChatResponse(question, selectedModel, isAdvanced, useRAG) {\r\n    const encodedQuestion = encodeURIComponent(question);\r\n    const endpoint = isAdvanced ? 'get_adv_response' : 'get_chat_response';\r\n\r\n    return fetch(\r\n        `http://127.0.0.1:8000/${endpoint}/?question=${encodedQuestion}&models=${selectedModel}&is_advanced=${isAdvanced}&use_rag=${useRAG}`,\r\n        { method: 'GET' }\r\n    )\r\n        .then(response => response.json())\r\n        .catch(error => {\r\n            console.error('There was a problem with your fetch operation:', error);\r\n            throw error;\r\n        });\r\n}\r\n\r\n// Function to clear messages\r\nfunction clearMessages() {\r\n    return fetch(`http://127.0.0.1:8000/clear_messages/`, { method: \"POST\" })\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                throw new Error('Network response was not ok');\r\n            }\r\n            return response.json();\r\n        })\r\n        .catch(error => {\r\n            console.error('There was a problem with your fetch operation:', error);\r\n            throw error;\r\n        });\r\n}\r\n\r\n// Function to get sources\r\nfunction getSourceUrls(searchQuery) {\r\n    return fetch(`http://127.0.0.1:8000/get_source_urls/?query=${String(searchQuery)}`, { method: \"GET\" })\r\n        .then(response => response.json())\r\n        .catch(error => {\r\n            console.error('There was a problem with your fetch operation:', error);\r\n            throw error;\r\n        });\r\n}\r\n\r\n// Function to log question\r\nfunction logQuestion(question, button) {\r\n    const currentUrl = window.location.href;\r\n\r\n    return fetch(\r\n        `http://127.0.0.1:8000/log_question/?question=${encodeURIComponent(question)}&button=${encodeURIComponent(button)}&current_url=${encodeURIComponent(currentUrl)}`,\r\n        { method: \"GET\" }\r\n    )\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (data.status !== 'success') {\r\n                console.error('Failed to log question');\r\n            }\r\n            return data;\r\n        })\r\n        .catch(error => {\r\n            console.error('Error logging question:', error);\r\n            throw error;\r\n        });\r\n}\r\n\r\n// Function to add preferred URL\r\nfunction addPreferredUrl(url) {\r\n    return fetch('http://127.0.0.1:8000/api/add_preferred_url/', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n        },\r\n        body: `url=${encodeURIComponent(url)}`\r\n    })\r\n        .then(response => response.json())\r\n        .catch(error => {\r\n            console.error('Error adding preferred link:', error);\r\n            throw error;\r\n        });\r\n}\r\n\r\n// Function to get preferred URLs\r\nfunction getPreferredUrls() {\r\n    return fetch('http://127.0.0.1:8000/api/get_preferred_urls/')\r\n        .then(response => response.json())\r\n        .catch(error => {\r\n            console.error('Error loading preferred links:', error);\r\n            throw error;\r\n        });\r\n}\r\n\r\nexport { \r\n    postWebTextToServer, \r\n    getChatResponse, \r\n    clearMessages, \r\n    getSourceUrls, \r\n    logQuestion,\r\n    addPreferredUrl,\r\n    getPreferredUrls\r\n};","// config.js\r\n\r\n// Available models\r\nconst availableModels = [\"o1-preview\", \"gpt-4o\", \"deepseek-reasoner\"];\r\n\r\n// Initialize a single selected model\r\nlet selectedModel = \"o1-preview\";\r\n\r\nfunction getSelectedModel() {\r\n    return selectedModel;\r\n}\r\n\r\nexport { availableModels, selectedModel, getSelectedModel };","// handlers.js\r\nimport { appendChatElement } from './helpers.js';\r\nimport { getChatResponse } from './api.js';\r\nimport { getSelectedModel, selectedModel } from './config.js';\r\n\r\n\r\n// Function to handle chat responses (single model)\r\nfunction handleChatResponse(question, isAdvanced = false) {\r\n    const startTime = performance.now();\r\n    const responseContainer = document.getElementById('respons');\r\n\r\n    // Show the user's question\r\n    appendChatElement(responseContainer, 'your_question', question);\r\n\r\n    // Placeholder \"Loading...\" text\r\n    const loadingElement = appendChatElement(\r\n        responseContainer,\r\n        'agent_response',\r\n        `FinGPT: Loading...`\r\n    );\r\n\r\n    // Read the RAG checkbox state\r\n    const useRAG = document.getElementById('ragSwitch').checked;\r\n\r\n    const selectedModel = getSelectedModel();\r\n\r\n    getChatResponse(question, selectedModel, isAdvanced, useRAG)\r\n        .then(data => {\r\n            const endTime = performance.now();\r\n            const responseTime = endTime - startTime;\r\n            console.log(`Time taken for response: ${responseTime} ms`);\r\n\r\n            // Get the response for the selected model\r\n            const modelResponse = data.resp[selectedModel];\r\n\r\n            if (!modelResponse) {\r\n                // Safeguard in case backend does not return something\r\n                loadingElement.innerText = `FinGPT: (No response from server)`;\r\n            } else if (modelResponse.startsWith(\"The following file(s) are missing\")) {\r\n                loadingElement.innerText = `FinGPT: Error - ${modelResponse}`;\r\n            } else {\r\n                loadingElement.innerText = `FinGPT: ${modelResponse}`;\r\n            }\r\n\r\n            // Clear the user textbox\r\n            document.getElementById('textbox').value = '';\r\n            responseContainer.scrollTop = responseContainer.scrollHeight;\r\n        })\r\n        .catch(error => {\r\n            console.error('There was a problem with your fetch operation:', error);\r\n            loadingElement.innerText = `FinGPT: Failed to load response.`;\r\n        });\r\n}\r\n\r\n// Function to handle image response\r\nfunction handleImageResponse(question, description) {\r\n    const responseContainer = document.getElementById('respons');\r\n    appendChatElement(responseContainer, 'your_question', question);\r\n\r\n    const responseDiv = document.createElement('div');\r\n    responseDiv.className = 'agent_response';\r\n    responseDiv.innerText = description;\r\n    responseContainer.appendChild(responseDiv);\r\n\r\n    responseContainer.scrollTop = responseContainer.scrollHeight;\r\n}\r\n\r\nexport { handleChatResponse, handleImageResponse };","// helpers.js\r\nimport { clearMessages, getSourceUrls, addPreferredUrl, getPreferredUrls, logQuestion } from './api.js';\r\nimport { handleChatResponse, handleImageResponse } from './handlers.js';\r\n\r\n// Function to append chat elements\r\nfunction appendChatElement(parent, className, text) {\r\n    const element = document.createElement('span');\r\n    element.className = className;\r\n    element.innerText = text;\r\n    parent.appendChild(element);\r\n    return element;\r\n}\r\n\r\n// Function to clear chat\r\nfunction clear() {\r\n    const response = document.getElementById('respons');\r\n    const sourceurls = document.getElementById('source_urls');\r\n\r\n    response.innerHTML = \"\";\r\n    if (sourceurls) {\r\n        sourceurls.innerHTML = \"\";\r\n    }\r\n    \r\n    clearMessages()\r\n        .then(data => {\r\n            console.log(data);\r\n        })\r\n        .catch(error => {\r\n            console.error('There was a problem clearing messages:', error);\r\n        });\r\n}\r\n\r\n// Ask button click\r\nfunction get_chat_response() {\r\n    const question = document.getElementById('textbox').value;\r\n\r\n    if (question) {\r\n        handleChatResponse(question, false);\r\n        logQuestion(question, 'Ask');\r\n        document.getElementById('textbox').value = '';\r\n    } else {\r\n        alert(\"Please enter a question.\");\r\n    }\r\n}\r\n\r\n// Advanced Ask button click\r\nfunction get_adv_chat_response() {\r\n    const question = document.getElementById('textbox').value.trim();\r\n\r\n    if (question === '') {\r\n        alert(\"Please enter a message.\");\r\n        return;\r\n    }\r\n\r\n    // Text Processing Mode\r\n    handleChatResponse(question, true);\r\n    logQuestion(question, 'Advanced Ask');\r\n\r\n    document.getElementById('textbox').value = '';\r\n}\r\n\r\n// Function to get sources\r\nfunction get_sources(searchQuery) {\r\n    const sources_window = document.getElementById('sources_window');\r\n    const loadingSpinner = document.getElementById('loading_spinner');\r\n    const source_urls = document.getElementById('source_urls');\r\n\r\n    sources_window.style.display = 'block';\r\n    loadingSpinner.style.display = 'block'; // Show the spinner\r\n    source_urls.style.display = 'none'; // Hide the source list initially\r\n\r\n    getSourceUrls(searchQuery)\r\n        .then(data => {\r\n            console.log(data[\"resp\"]);\r\n            const sources = data[\"resp\"];\r\n            source_urls.innerHTML = '';\r\n\r\n            sources.forEach(source => {\r\n                const url = source[0];\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                link.innerText = url;\r\n                link.target = \"_blank\";\r\n\r\n                const listItem = document.createElement('li');\r\n                listItem.appendChild(link);\r\n                listItem.classList.add('source-item');\r\n\r\n                source_urls.appendChild(listItem);\r\n            });\r\n\r\n            loadingSpinner.style.display = 'none'; // Hide spinner\r\n            source_urls.style.display = 'block'; // Show source list\r\n        })\r\n        .catch(error => {\r\n            console.error('There was a problem getting sources:', error);\r\n            loadingSpinner.style.display = 'none'; // Hide spinner in case of error\r\n        });\r\n}\r\n\r\n// Function to load preferred links\r\nfunction loadPreferredLinks() {\r\n    getPreferredUrls()\r\n        .then(data => {\r\n            const preferredLinksContent = document.getElementById('preferred_links_content');\r\n            preferredLinksContent.innerHTML = ''; // Clear existing content\r\n            \r\n            if (data.urls.length > 0) {\r\n                data.urls.forEach(link => {\r\n                    const linkItem = document.createElement('div');\r\n                    linkItem.className = 'preferred-link-item';\r\n                    linkItem.innerText = link;\r\n                    preferredLinksContent.appendChild(linkItem);\r\n                });\r\n            }\r\n            \r\n            // Re-add the '+' button\r\n            const addLinkButton = document.getElementById('add_link_button') || createAddLinkButton();\r\n            preferredLinksContent.appendChild(addLinkButton);\r\n        })\r\n        .catch(error => console.error('Error loading preferred links:', error));\r\n}\r\n\r\n// Function to create Add Link Button\r\nfunction createAddLinkButton() {\r\n    const addLinkButton = document.createElement('div');\r\n    addLinkButton.id = \"add_link_button\";\r\n    addLinkButton.innerText = \"+\";\r\n    addLinkButton.onclick = function() {\r\n        const newLink = prompt(\"Enter a new preferred URL:\");\r\n        if (newLink) {\r\n            addPreferredUrl(newLink)\r\n                .then(data => {\r\n                    if (data.status === 'success') {\r\n                        const preferredLinksContent = document.getElementById('preferred_links_content');\r\n                        const newLinkItem = document.createElement('div');\r\n                        newLinkItem.className = 'preferred-link-item';\r\n                        newLinkItem.innerText = newLink;\r\n                        preferredLinksContent.insertBefore(newLinkItem, addLinkButton);\r\n                    } else {\r\n                        alert('Failed to add the new URL.');\r\n                    }\r\n                })\r\n                .catch(error => console.error('Error adding preferred link:', error));\r\n        }\r\n    };\r\n    return addLinkButton;\r\n}\r\n\r\n// Function to make an element draggable and resizable\r\nfunction makeDraggableAndResizable(element, sourceWindowOffsetX = 10, isFixedMode = false) {\r\n    let isDragging = false;\r\n    let isResizing = false;\r\n    let offsetX, offsetY, startX, startY, startWidth, startHeight;\r\n\r\n    element.querySelector('.draggable').addEventListener('mousedown', function(e) {\r\n        if (['INPUT', 'TEXTAREA', 'BUTTON', 'A'].includes(e.target.tagName) || 'position-mode-icon' === e.target.id) {\r\n            return;\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        const rect = element.getBoundingClientRect();\r\n        const isRightEdge = e.clientX > rect.right - 10;\r\n        const isBottomEdge = e.clientY > rect.bottom - 10;\r\n\r\n        if (isRightEdge || isBottomEdge) {\r\n            isResizing = true;\r\n            startX = e.clientX;\r\n            startY = e.clientY;\r\n            startWidth = rect.width;\r\n            startHeight = rect.height;\r\n            document.addEventListener('mousemove', resizeElement);\r\n        } else {\r\n            isDragging = true;\r\n            offsetX = e.clientX - rect.left;\r\n            offsetY = e.clientY - rect.top;\r\n            document.addEventListener('mousemove', dragElement);\r\n        }\r\n\r\n        document.addEventListener('mouseup', closeDragOrResizeElement);\r\n    });\r\n\r\n    function dragElement(e) {\r\n        e.preventDefault();\r\n        const newX = e.clientX - offsetX + (isFixedMode ? 0 : window.scrollX);\r\n        const newY = e.clientY - offsetY + (isFixedMode ? 0 : window.scrollY);\r\n        element.style.left = `${newX}px`;\r\n        element.style.top = `${newY}px`;\r\n\r\n        // Move sources window with main popup\r\n        const sourcesWindow = document.getElementById('sources_window');\r\n        sourcesWindow.style.left = `${newX + element.offsetWidth + sourceWindowOffsetX}px`;\r\n        sourcesWindow.style.top = `${newY}px`;\r\n    }\r\n\r\n    function resizeElement(e) {\r\n        e.preventDefault();\r\n        const newWidth = startWidth + (e.clientX - startX);\r\n        const newHeight = startHeight + (e.clientY - startY);\r\n        if (newWidth > 250) {\r\n            element.style.width = `${newWidth}px`;\r\n        }\r\n        if (newHeight > 300) {\r\n            element.style.height = `${newHeight}px`;\r\n        }\r\n\r\n        // Move sources window with main popup\r\n        const sourcesWindow = document.getElementById('sources_window');\r\n        sourcesWindow.style.left = `${element.offsetLeft + element.offsetWidth + sourceWindowOffsetX}px`;\r\n    }\r\n\r\n    function closeDragOrResizeElement() {\r\n        document.removeEventListener('mousemove', dragElement);\r\n        document.removeEventListener('mousemove', resizeElement);\r\n        document.removeEventListener('mouseup', closeDragOrResizeElement);\r\n        isDragging = false;\r\n        isResizing = false;\r\n    }\r\n}\r\n\r\nexport { appendChatElement, clear, get_chat_response, get_adv_chat_response, get_sources, \r\n    loadPreferredLinks, createAddLinkButton, makeDraggableAndResizable };","// settings_window.js\r\nimport { availableModels, selectedModel } from '../config.js';\r\nimport { loadPreferredLinks, createAddLinkButton } from '../helpers.js';\r\n\r\nfunction createSettingsWindow(isFixedModeRef, settingsIcon, positionModeIcon) {\r\n    const settings_window = document.createElement('div');\r\n    settings_window.style.display = \"none\";\r\n    settings_window.id = \"settings_window\";\r\n\r\n    const label = document.createElement('label');\r\n    label.innerText = \"Light Mode\";\r\n    const lightSwitch = document.createElement('input');\r\n    lightSwitch.type = \"checkbox\";\r\n    lightSwitch.onchange = () => document.body.classList.toggle('light-mode');\r\n    label.appendChild(lightSwitch);\r\n    settings_window.appendChild(label);\r\n\r\n    const modelContainer = document.createElement('div');\r\n    modelContainer.id = \"model_selection_container\";\r\n\r\n    const modelHeader = document.createElement('div');\r\n    modelHeader.id = \"model_selection_header\";\r\n    modelHeader.innerText = `Model: ${selectedModel}`;\r\n\r\n    const modelToggleIcon = document.createElement('span');\r\n    modelToggleIcon.innerText = \"‚ØÜ\";\r\n\r\n    modelHeader.appendChild(modelToggleIcon);\r\n    modelContainer.appendChild(modelHeader);\r\n\r\n    const modelContent = document.createElement('div');\r\n    modelContent.id = \"model_selection_content\";\r\n    modelContent.style.display = \"none\";\r\n\r\n    function handleModelSelection(modelItem, modelName) {\r\n        document.querySelectorAll('.model-selection-item').forEach(item => item.classList.remove('selected-model'));\r\n        window.selectedModel = modelName;\r\n        modelItem.classList.add('selected-model');\r\n        modelHeader.innerText = `Model: ${modelName}`;\r\n        modelHeader.appendChild(modelToggleIcon);\r\n    }\r\n\r\n    availableModels.forEach(model => {\r\n        const item = document.createElement('div');\r\n        item.className = 'model-selection-item';\r\n        item.innerText = model;\r\n        if (model === selectedModel) item.classList.add('selected-model');\r\n        item.onclick = () => handleModelSelection(item, model);\r\n        modelContent.appendChild(item);\r\n    });\r\n\r\n    modelContainer.appendChild(modelContent);\r\n    settings_window.appendChild(modelContainer);\r\n\r\n    modelHeader.onclick = () => {\r\n        modelContent.style.display = modelContent.style.display === \"none\" ? \"block\" : \"none\";\r\n        modelToggleIcon.innerText = modelContent.style.display === \"none\" ? \"‚ØÜ\" : \"‚ØÖ\";\r\n    };\r\n\r\n    const preferredLinksContainer = document.createElement('div');\r\n    preferredLinksContainer.id = \"preferred_links_container\";\r\n\r\n    const preferredLinksHeader = document.createElement('div');\r\n    preferredLinksHeader.id = \"preferred_links_header\";\r\n    preferredLinksHeader.innerText = \"Preferred Links\";\r\n\r\n    const toggleIcon = document.createElement('span');\r\n    toggleIcon.innerText = \"‚ØÜ\";\r\n    preferredLinksHeader.appendChild(toggleIcon);\r\n    preferredLinksContainer.appendChild(preferredLinksHeader);\r\n\r\n    const preferredLinksContent = document.createElement('div');\r\n    preferredLinksContent.id = \"preferred_links_content\";\r\n    preferredLinksContent.appendChild(createAddLinkButton());\r\n\r\n    preferredLinksContainer.appendChild(preferredLinksContent);\r\n    settings_window.appendChild(preferredLinksContainer);\r\n\r\n    preferredLinksHeader.onclick = function () {\r\n        const isHidden = preferredLinksContent.style.display === \"none\";\r\n        preferredLinksContent.style.display = isHidden ? \"block\" : \"none\";\r\n        toggleIcon.innerText = isHidden ? \"‚ØÖ\" : \"‚ØÜ\";\r\n    };\r\n\r\n    const ragLabel = document.createElement('label');\r\n    ragLabel.innerText = \"Local RAG\";\r\n    const ragSwitch = document.createElement('input');\r\n    ragSwitch.type = \"checkbox\";\r\n    ragSwitch.id = \"ragSwitch\";\r\n    ragLabel.appendChild(ragSwitch);\r\n    settings_window.appendChild(ragLabel);\r\n\r\n    settingsIcon.onclick = function (event) {\r\n        event.stopPropagation();\r\n        const rect = settingsIcon.getBoundingClientRect();\r\n        const y = rect.bottom + (isFixedModeRef.value ? 0 : window.scrollY);\r\n        const x = rect.left + (isFixedModeRef.value ? 0 : window.scrollX);\r\n        settings_window.style.top = `${y}px`;\r\n        settings_window.style.left = `${x}px`;\r\n        settings_window.style.display = settings_window.style.display === 'none' ? 'block' : 'none';\r\n        settings_window.style.position = isFixedModeRef.value ? 'fixed' : 'absolute';\r\n        if (settings_window.style.display === 'block') loadPreferredLinks();\r\n    };\r\n\r\n    document.addEventListener('click', function (event) {\r\n        if (\r\n            settings_window.style.display === 'block' &&\r\n            !settings_window.contains(event.target) &&\r\n            !settingsIcon.contains(event.target) &&\r\n            !positionModeIcon.contains(event.target)\r\n        ) {\r\n            settings_window.style.display = 'none';\r\n        }\r\n    });\r\n\r\n    return settings_window;\r\n}\r\n\r\nexport { createSettingsWindow };\r\n","// main.js\r\nimport { postWebTextToServer } from './modules/api.js';\r\nimport { createUI } from './modules/ui.js';\r\n\r\nconst currentUrl = window.location.href.toString();\r\nconsole.log(\"Current page: \", currentUrl);\r\n\r\nconst textContent = document.body.innerText || \"\";\r\nconst encodedContent = encodeURIComponent(textContent);\r\n\r\n// POST JSON to the server endpoint\r\npostWebTextToServer(textContent, currentUrl)\r\n    .then(data => {\r\n        console.log(\"Response from server:\", data);\r\n    })\r\n    .catch(error => {\r\n        console.error(\"There was a problem with your fetch operation:\", error);\r\n    });\r\n\r\n// Initialize UI\r\nconst { popup, settings_window, sources_window, searchQuery } = createUI();","// ui.js\r\nimport { get_chat_response, get_adv_chat_response, makeDraggableAndResizable } from './helpers.js';\r\nimport { createPopup } from './components/popup.js';\r\nimport { createHeader } from './components/header.js';\r\nimport { createChatInterface } from './components/chat.js';\r\nimport { createSettingsWindow } from './components/settings_window.js';\r\n\r\n// Function to create UI elements\r\nfunction createUI() {\r\n    let isFixedMode = false;\r\n    let searchQuery = '';\r\n\r\n    const isFixedModeRef = { value: isFixedMode }; // Pass-by-reference workaround\r\n\r\n    // Main popup\r\n    const popup = createPopup();\r\n\r\n    // Icons\r\n    const settingsIcon = document.createElement('span');\r\n    settingsIcon.innerText = \"‚öôÔ∏è\";\r\n    settingsIcon.className = \"icon\";\r\n\r\n    const positionModeIcon = document.createElement('span');\r\n    positionModeIcon.innerText = \"üìå\";\r\n    positionModeIcon.id = \"position-mode-icon\";\r\n    positionModeIcon.className = \"icon\";\r\n\r\n    // Settings window\r\n    const settings_window = createSettingsWindow(isFixedModeRef, settingsIcon, positionModeIcon);\r\n\r\n    // Position mode toggle logic\r\n    positionModeIcon.onclick = function () {\r\n        const rect = popup.getBoundingClientRect();\r\n        if (isFixedModeRef.value) {\r\n            popup.style.position = \"absolute\";\r\n            popup.style.top = `${rect.top + window.scrollY}px`;\r\n            popup.style.left = `${rect.left + window.scrollX}px`;\r\n            positionModeIcon.innerText = \"üìå\";\r\n\r\n            const settingsIconRect = settingsIcon.getBoundingClientRect();\r\n            settings_window.style.position = \"absolute\";\r\n            settings_window.style.top = `${settingsIconRect.bottom + window.scrollY}px`;\r\n            settings_window.style.left = `${settingsIconRect.left + window.scrollX}px`;\r\n        } else {\r\n            popup.style.position = \"fixed\";\r\n            popup.style.top = `${rect.top}px`;\r\n            popup.style.left = `${rect.left}px`;\r\n            positionModeIcon.innerText = \"‚õìÔ∏è‚Äçüí•\";\r\n\r\n            const settingsIconRect = settingsIcon.getBoundingClientRect();\r\n            settings_window.style.position = \"fixed\";\r\n            settings_window.style.top = `${settingsIconRect.bottom}px`;\r\n            settings_window.style.left = `${settingsIconRect.left}px`;\r\n        }\r\n        isFixedModeRef.value = !isFixedModeRef.value;\r\n    };\r\n\r\n    // Header\r\n    const header = createHeader(popup, settings_window, settingsIcon, positionModeIcon, isFixedModeRef);\r\n\r\n    // Intro\r\n    const intro = document.createElement('div');\r\n    intro.id = \"intro\";\r\n\r\n    const titleText = document.createElement('h2');\r\n    titleText.innerText = \"Your personalized financial assistant.\";\r\n\r\n    const subtitleText = document.createElement('p');\r\n    subtitleText.id = \"subtitleText\";\r\n    subtitleText.innerText = \"Ask me something!\";\r\n\r\n    intro.appendChild(subtitleText);\r\n    intro.appendChild(titleText);\r\n    intro.appendChild(subtitleText);\r\n\r\n    // Chat area\r\n    const content = document.createElement('div');\r\n    content.id = \"content\";\r\n    const responseContainer = document.createElement('div');\r\n    responseContainer.id = \"respons\";\r\n    content.appendChild(responseContainer);\r\n\r\n    const { inputContainer, buttonContainer, buttonRow } = createChatInterface(searchQuery);\r\n\r\n    // Sources window\r\n    const sources_window = document.createElement('div');\r\n    sources_window.id = \"sources_window\";\r\n    sources_window.style.display = 'none';\r\n\r\n    const sourcesHeader = document.createElement('div');\r\n    sourcesHeader.id = \"sources_window_header\";\r\n\r\n    const sourcesTitle = document.createElement('h2');\r\n    sourcesTitle.innerText = \"Sources\";\r\n\r\n    const sourcesCloseIcon = document.createElement('span');\r\n    sourcesCloseIcon.innerText = \"‚ùå\";\r\n    sourcesCloseIcon.className = \"icon\";\r\n    sourcesCloseIcon.onclick = function () {\r\n        sources_window.style.display = 'none';\r\n    };\r\n\r\n    sourcesHeader.appendChild(sourcesTitle);\r\n    sourcesHeader.appendChild(sourcesCloseIcon);\r\n\r\n    const loadingSpinner = document.createElement('div');\r\n    loadingSpinner.id = \"loading_spinner\";\r\n    loadingSpinner.className = \"spinner\";\r\n    loadingSpinner.style.display = 'none';\r\n\r\n    const source_urls = document.createElement('ul');\r\n    source_urls.id = \"source_urls\";\r\n\r\n    sources_window.appendChild(sourcesHeader);\r\n    sources_window.appendChild(loadingSpinner);\r\n    sources_window.appendChild(source_urls);\r\n\r\n    // Mount everything\r\n    popup.appendChild(header);\r\n    popup.appendChild(intro);\r\n    popup.appendChild(content);\r\n    popup.appendChild(buttonRow);\r\n    popup.appendChild(inputContainer);\r\n    popup.appendChild(buttonContainer);\r\n\r\n    document.body.appendChild(sources_window);\r\n    document.body.appendChild(settings_window);\r\n    document.body.appendChild(popup);\r\n\r\n    // Position + interaction\r\n    popup.style.position = \"absolute\";\r\n    popup.style.top = \"10%\";\r\n    popup.style.left = \"10%\";\r\n    popup.style.width = '450px';\r\n    popup.style.height = '650px';\r\n\r\n    const sourceWindowOffsetX = 10;\r\n    makeDraggableAndResizable(popup, sourceWindowOffsetX, isFixedModeRef.value);\r\n\r\n    const popupRect = popup.getBoundingClientRect();\r\n    sources_window.style.left = `${popupRect.right + sourceWindowOffsetX}px`;\r\n    sources_window.style.top = `${popupRect.top}px`;\r\n\r\n    console.log(\"initalized\");\r\n\r\n    return {\r\n        popup,\r\n        settings_window,\r\n        sources_window,\r\n        searchQuery,\r\n    };\r\n}\r\n\r\nexport { get_chat_response, get_adv_chat_response, createUI };\r\n","// popup.js\r\nfunction createPopup() {\r\n    const popup = document.createElement('div');\r\n    popup.id = \"draggableElement\";\r\n    return popup;\r\n}\r\n\r\nexport { createPopup };\r\n","// header.js\r\nfunction createHeader(popup, settings_window, settingsIcon, positionModeIcon, isFixedModeRef) {\r\n    const header = document.createElement('div');\r\n    header.id = \"header\";\r\n    header.className = \"draggable\";\r\n\r\n    const title = document.createElement('span');\r\n    title.innerText = \"FinGPT\";\r\n\r\n    const iconContainer = document.createElement('div');\r\n    iconContainer.id = \"icon-container\";\r\n\r\n    const minimizeIcon = document.createElement('span');\r\n    minimizeIcon.innerText = \"‚ûñ\";\r\n    minimizeIcon.className = \"icon\";\r\n    minimizeIcon.onclick = function () {\r\n        if (popup.classList.contains('minimized')) {\r\n            popup.classList.remove('minimized');\r\n            popup.style.height = '600px';\r\n        } else {\r\n            popup.classList.add('minimized');\r\n            popup.style.height = '60px';\r\n        }\r\n    };\r\n\r\n    const closeIcon = document.createElement('span');\r\n    closeIcon.innerText = \"‚ùå\";\r\n    closeIcon.className = \"icon\";\r\n    closeIcon.onclick = function () {\r\n        popup.style.display = 'none';\r\n    };\r\n\r\n    iconContainer.appendChild(settingsIcon);\r\n    iconContainer.appendChild(positionModeIcon);\r\n    iconContainer.appendChild(minimizeIcon);\r\n    iconContainer.appendChild(closeIcon);\r\n\r\n    header.appendChild(title);\r\n    header.appendChild(iconContainer);\r\n\r\n    return header;\r\n}\r\n\r\nexport { createHeader };\r\n","// chat.js\r\nimport { get_chat_response, get_adv_chat_response, clear, get_sources } from '../helpers.js';\r\n\r\nfunction createChatInterface(searchQuery) {\r\n    const inputContainer = document.createElement('div');\r\n    inputContainer.id = \"inputContainer\";\r\n\r\n    const modeButtonsContainer = document.createElement('div');\r\n    modeButtonsContainer.id = 'modeButtonsContainer';\r\n\r\n    const textModeButton = document.createElement('button');\r\n    textModeButton.id = 'textModeButton';\r\n    textModeButton.innerText = 'Text Mode';\r\n    textModeButton.classList.add('mode-button', 'active-mode');\r\n\r\n    modeButtonsContainer.appendChild(textModeButton);\r\n    inputContainer.appendChild(modeButtonsContainer);\r\n\r\n    const textbox = document.createElement(\"input\");\r\n    textbox.type = \"text\";\r\n    textbox.id = \"textbox\";\r\n    textbox.placeholder = \"Type your question here...\";\r\n    textbox.addEventListener(\"keydown\", function (event) {\r\n        if (event.key === \"Enter\") {\r\n            get_chat_response();\r\n        }\r\n    });\r\n    inputContainer.appendChild(textbox);\r\n\r\n    const buttonContainer = document.createElement('div');\r\n    buttonContainer.id = \"buttonContainer\";\r\n\r\n    const askButton = document.createElement('button');\r\n    askButton.id = 'askButton';\r\n    askButton.innerText = \"Ask\";\r\n    askButton.onclick = get_chat_response;\r\n\r\n    const advAskButton = document.createElement('button');\r\n    advAskButton.id = 'advAskButton';\r\n    advAskButton.innerText = \"Advanced Ask\";\r\n    advAskButton.onclick = get_adv_chat_response;\r\n\r\n    buttonContainer.appendChild(askButton);\r\n    buttonContainer.appendChild(advAskButton);\r\n\r\n    const buttonRow = document.createElement('div');\r\n    buttonRow.className = \"button-row\";\r\n\r\n    const clearButton = document.createElement('button');\r\n    clearButton.innerText = \"Clear\";\r\n    clearButton.className = \"clear-button\";\r\n    clearButton.onclick = clear;\r\n\r\n    const sourcesButton = document.createElement('button');\r\n    sourcesButton.innerText = \"Sources\";\r\n    sourcesButton.className = \"sources-button\";\r\n    sourcesButton.onclick = function () { get_sources(searchQuery); };\r\n\r\n    buttonRow.appendChild(sourcesButton);\r\n    buttonRow.appendChild(clearButton);\r\n\r\n    return { inputContainer, buttonContainer, buttonRow };\r\n}\r\n\r\nexport { createChatInterface };\r\n"],"names":["logQuestion","question","button","currentUrl","window","location","href","fetch","concat","encodeURIComponent","method","then","response","json","data","status","console","error","availableModels","selectedModel","getSelectedModel","handleChatResponse","isAdvanced","arguments","length","undefined","startTime","performance","now","responseContainer","document","getElementById","appendChatElement","loadingElement","useRAG","checked","encodedQuestion","getChatResponse","responseTime","log","modelResponse","resp","startsWith","innerText","value","scrollTop","scrollHeight","parent","className","text","element","createElement","appendChild","clear","sourceurls","innerHTML","ok","Error","get_chat_response","alert","get_adv_chat_response","trim","createAddLinkButton","addLinkButton","id","onclick","url","newLink","prompt","headers","body","preferredLinksContent","newLinkItem","insertBefore","createSettingsWindow","isFixedModeRef","settingsIcon","positionModeIcon","settings_window","style","display","label","lightSwitch","type","onchange","classList","toggle","modelContainer","modelHeader","modelToggleIcon","modelContent","forEach","model","item","add","modelItem","modelName","querySelectorAll","remove","preferredLinksContainer","preferredLinksHeader","toggleIcon","isHidden","ragLabel","ragSwitch","event","stopPropagation","rect","getBoundingClientRect","y","bottom","scrollY","x","left","scrollX","top","position","urls","link","linkItem","addEventListener","contains","target","toString","textContent","JSON","stringify","postWebTextToServer","_createUI","popup","createPopup","settingsIconRect","header","title","iconContainer","minimizeIcon","height","closeIcon","createHeader","intro","titleText","subtitleText","content","_createChatInterface","inputContainer","modeButtonsContainer","textModeButton","textbox","placeholder","key","buttonContainer","askButton","advAskButton","buttonRow","clearButton","sourcesButton","searchQuery","sources_window","loadingSpinner","source_urls","String","getSourceUrls","sources","source","listItem","get_sources","createChatInterface","sourcesHeader","sourcesTitle","sourcesCloseIcon","width","offsetX","offsetY","startX","startY","startWidth","startHeight","sourceWindowOffsetX","isFixedMode","dragElement","e","preventDefault","newX","clientX","newY","clientY","sourcesWindow","offsetWidth","resizeElement","newWidth","newHeight","offsetLeft","closeDragOrResizeElement","removeEventListener","querySelector","includes","tagName","isRightEdge","right","isBottomEdge","makeDraggableAndResizable","popupRect","createUI"],"sourceRoot":""}